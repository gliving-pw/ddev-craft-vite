var a=Object.defineProperty;var h=(r,e,t)=>e in r?a(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var i=(r,e,t)=>(h(r,typeof e!="symbol"?e+"":e,t),t);class o extends HTMLElement{constructor(){super();i(this,"input");i(this,"textEl");i(this,"errorEl");i(this,"handleBlur",()=>{this.validate()});i(this,"handleInput",this.clearError.bind(this));i(this,"handleFocus",()=>{this.input.value.length&&(this.input.value=this.input.value.replace(/[\-\+\s\(\)]/g,""))});this.input=this.querySelector("input"),this.textEl=this.querySelector("p");const t=document.createElement("p");t.className="error",t.style.display="none",this.insertBefore(t,this.input),this.errorEl=t}formatPhoneNumber(t){var l=(""+t).replace(/\D/g,""),s=l.match(/^(1|)?(\d{3})(\d{3})(\d{4})$/);if(s){var n=s[1]?"+1 ":"";return[n,"(",s[2],") ",s[3],"-",s[4]].join("")}return null}validate(){let t=!0;if(this.input.required)if(this.input.value==="")t=!1,this.getAttribute("state")!=="invalid"&&this.reportError("This field is required.");else{const l=this.formatPhoneNumber(this.input.value);l?(this.input.value=l,this.clearError()):(t=!1,this.getAttribute("state")!=="invalid"&&this.reportError("Provide a valid US phone number."))}else this.clearError();return t}reportError(t){this.errorEl.innerHTML=t,this.errorEl.style.display="block",this.textEl&&(this.textEl.style.display="none"),this.setAttribute("state","invalid")}clearError(){this.errorEl.style.display="none",this.textEl&&(this.textEl.style.display="block"),this.setAttribute("state","valid")}connectedCallback(){this.input.addEventListener("input",this.handleInput),this.input.addEventListener("blur",this.handleBlur),this.input.addEventListener("focus",this.handleFocus)}}export{o as default};
