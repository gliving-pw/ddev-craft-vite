var l=Object.defineProperty;var h=(i,e,t)=>e in i?l(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var r=(i,e,t)=>(h(i,typeof e!="symbol"?e+"":e,t),t);class o extends HTMLElement{constructor(){super();r(this,"input");r(this,"errorEl");r(this,"hasValue",()=>{this.input.value.length?this.input.classList.add("has-value"):this.input.classList.remove("has-value")});r(this,"doValidation",()=>{if(this.hasValue(),this.input.required&&this.input.value===""){this.getAttribute("state")!=="invalid"&&this.reportError("This field is required.");return}if(this.input.type==="email")if(new RegExp(/[^@ \t\r\n]+@[^@ \t\r\n]+\.[^@ \t\r\n]+/).test(this.input.value))this.clearError();else{this.getAttribute("state")!=="invalid"&&this.reportError("Invalid email format.");return}if(this.input.type==="tel"){const t=this.formatPhoneNumber(this.input.value);if(t)this.input.value=t,this.clearError();else if(this.getAttribute("state")!=="invalid"){this.reportError("Provide a valid US phone number.");return}}if(this.input.type==="url")if(new RegExp(/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()!@:%_\+.~#?&\/\/=]*)/g).test(this.input.value))this.clearError();else{this.getAttribute("state")!=="invalid"&&this.reportError("Invalid URL format.");return}this.clearError()});r(this,"formatPhoneNumber",t=>{var a=(""+t).replace(/\D/g,""),s=a.match(/^(1|)?(\d{3})(\d{3})(\d{4})$/);if(s){var n=s[1]?"+1 ":"";return[n,"(",s[2],") ",s[3],"-",s[4]].join("")}return null});r(this,"handleBlur",()=>{this.doValidation()});r(this,"handleInput",this.clearError.bind(this));this.input=this.querySelector("input");const t=document.createElement("p");t.className="error",this.appendChild(t),this.errorEl=t}reportError(t){this.errorEl.innerHTML=t,this.errorEl.style.display="block",this.setAttribute("state","invalid")}clearError(){this.errorEl.style.display="none",this.setAttribute("state","valid")}connectedCallback(){this.input.addEventListener("input",this.handleInput),this.input.addEventListener("blur",this.handleBlur)}}export{o as default};
